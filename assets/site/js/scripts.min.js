!function(t){function e(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=15)}([function(t,e){function i(t,e,o){t=t||{},e=e||{},o=o||!1;for(var r in e)if(e.hasOwnProperty(r)){var n=t[r],s=e[r];o&&p(n)&&p(s)?t[r]=i(n,s,o):t[r]=s}return t}function o(t,e){var i=t;for(var o in e)if(e.hasOwnProperty(o)){var r=e[o],n="\\{"+o+"\\}",s=new RegExp(n,"g");i=i.replace(s,r)}return i}function r(t,e,i){for(var o=t.style,r=0;r<d.length;++r){o[d[r]+s(e)]=i}o[e]=i}function n(t,e){u(e,function(e,i){null!==e&&void 0!==e&&(p(e)&&!0===e.prefix?r(t,i,e.value):t.style[i]=e)})}function s(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return"string"==typeof t||t instanceof String}function l(t){return"function"==typeof t}function h(t){return"[object Array]"===Object.prototype.toString.call(t)}function p(t){return!h(t)&&("object"==typeof t&&!!t)}function u(t,e){for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];e(o,i)}}function c(t,e){return Math.abs(t-e)<g}function f(t){for(;t.firstChild;)t.removeChild(t.firstChild)}var d="Webkit Moz O ms".split(" "),g=.001;t.exports={extend:i,render:o,setStyle:r,setStyles:n,capitalize:s,isString:a,isFunction:l,isObject:p,forEachObject:u,floatEquals:c,removeChildren:f}},function(t,e,i){var o=i(3),r=i(0),n=function t(e,i){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=r.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},i,!0),r.isObject(i)&&void 0!==i.svgStyle&&(this._opts.svgStyle=i.svgStyle),r.isObject(i)&&r.isObject(i.text)&&void 0!==i.text.style&&(this._opts.text.style=i.text.style);var n,s=this._createSvgView(this._opts);if(!(n=r.isString(e)?document.querySelector(e):e))throw new Error("Container does not exist: "+e);this._container=n,this._container.appendChild(s.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&r.setStyles(s.svg,this._opts.svgStyle),this.svg=s.svg,this.path=s.path,this.trail=s.trail,this.text=null;var a=r.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new o(s.path,a),r.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};n.prototype.animate=function(t,e,i){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.animate(t,e,i)},n.prototype.stop=function(){if(null===this._progressPath)throw new Error("Object is destroyed");void 0!==this._progressPath&&this._progressPath.stop()},n.prototype.destroy=function(){if(null===this._progressPath)throw new Error("Object is destroyed");this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},n.prototype.set=function(t){if(null===this._progressPath)throw new Error("Object is destroyed");this._progressPath.set(t)},n.prototype.value=function(){if(null===this._progressPath)throw new Error("Object is destroyed");return void 0===this._progressPath?0:this._progressPath.value()},n.prototype.setText=function(t){if(null===this._progressPath)throw new Error("Object is destroyed");null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),r.isObject(t)?(r.removeChildren(this.text),this.text.appendChild(t)):this.text.innerHTML=t},n.prototype._createSvgView=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(e,t);var i=null;(t.trailColor||t.trailWidth)&&(i=this._createTrail(t),e.appendChild(i));var o=this._createPath(t);return e.appendChild(o),{svg:e,path:o,trail:i}},n.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 100")},n.prototype._createPath=function(t){var e=this._pathString(t);return this._createPathElement(e,t)},n.prototype._createTrail=function(t){var e=this._trailString(t),i=r.extend({},t);return i.trailColor||(i.trailColor="#eee"),i.trailWidth||(i.trailWidth=i.strokeWidth),i.color=i.trailColor,i.strokeWidth=i.trailWidth,i.fill=null,this._createPathElement(e,i)},n.prototype._createPathElement=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",t),i.setAttribute("stroke",e.color),i.setAttribute("stroke-width",e.strokeWidth),e.fill?i.setAttribute("fill",e.fill):i.setAttribute("fill-opacity","0"),i},n.prototype._createTextContainer=function(t,e){var i=document.createElement("div");i.className=t.text.className;var o=t.text.style;return o&&(t.text.autoStyleContainer&&(e.style.position="relative"),r.setStyles(i,o),o.color||(i.style.color=t.color)),this._initializeTextContainer(t,e,i),i},n.prototype._initializeTextContainer=function(t,e,i){},n.prototype._pathString=function(t){throw new Error("Override this function for each progress bar")},n.prototype._trailString=function(t){throw new Error("Override this function for each progress bar")},n.prototype._warnContainerAspectRatio=function(t){if(this.containerAspectRatio){var e=window.getComputedStyle(t,null),i=parseFloat(e.getPropertyValue("width"),10),o=parseFloat(e.getPropertyValue("height"),10);r.floatEquals(this.containerAspectRatio,i/o)||(console.warn("Incorrect aspect ratio of container","#"+t.id,"detected:",e.getPropertyValue("width")+"(width)","/",e.getPropertyValue("height")+"(height)","=",i/o),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},t.exports=n},function(t,e,i){var o=i(1),r=i(0),n=function(t,e){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,o.apply(this,arguments)};n.prototype=new o,n.prototype.constructor=n,n.prototype._pathString=function(t){var e=t.strokeWidth;t.trailWidth&&t.trailWidth>t.strokeWidth&&(e=t.trailWidth);var i=50-e/2;return r.render(this._pathTemplate,{radius:i,"2radius":2*i})},n.prototype._trailString=function(t){return this._pathString(t)},t.exports=n},function(t,e,i){var o=i(13),r=i(0),n={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},s=function t(e,i){if(!(this instanceof t))throw new Error("Constructor was called without new keyword");i=r.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},i);var o;o=r.isString(e)?document.querySelector(e):e,this.path=o,this._opts=i,this._tweenable=null;var n=this.path.getTotalLength();this.path.style.strokeDasharray=n+" "+n,this.set(0)};s.prototype.value=function(){var t=this._getComputedDashOffset(),e=this.path.getTotalLength(),i=1-t/e;return parseFloat(i.toFixed(6),10)},s.prototype.set=function(t){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(t);var e=this._opts.step;if(r.isFunction(e)){var i=this._easing(this._opts.easing);e(this._calculateTo(t,i),this._opts.shape||this,this._opts.attachment)}},s.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},s.prototype.animate=function(t,e,i){e=e||{},r.isFunction(e)&&(i=e,e={});var n=r.extend({},e),s=r.extend({},this._opts);e=r.extend(s,e);var a=this._easing(e.easing),l=this._resolveFromAndTo(t,a,n);this.stop(),this.path.getBoundingClientRect();var h=this._getComputedDashOffset(),p=this._progressToOffset(t),u=this;this._tweenable=new o,this._tweenable.tween({from:r.extend({offset:h},l.from),to:r.extend({offset:p},l.to),duration:e.duration,easing:a,step:function(t){u.path.style.strokeDashoffset=t.offset;var i=e.shape||u;e.step(t,i,e.attachment)},finish:function(t){r.isFunction(i)&&i()}})},s.prototype._getComputedDashOffset=function(){var t=window.getComputedStyle(this.path,null);return parseFloat(t.getPropertyValue("stroke-dashoffset"),10)},s.prototype._progressToOffset=function(t){var e=this.path.getTotalLength();return e-t*e},s.prototype._resolveFromAndTo=function(t,e,i){return i.from&&i.to?{from:i.from,to:i.to}:{from:this._calculateFrom(e),to:this._calculateTo(t,e)}},s.prototype._calculateFrom=function(t){return o.interpolate(this._opts.from,this._opts.to,this.value(),t)},s.prototype._calculateTo=function(t,e){return o.interpolate(this._opts.from,this._opts.to,t,e)},s.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},s.prototype._easing=function(t){return n.hasOwnProperty(t)?n[t]:t},t.exports=s},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.load_hotels_available(e).then(function(t){new l.default({element:t.element,map:i})})}var n=i(8),s=o(n),a=i(6),l=o(a),h=jQuery;h(document).ready(function(){var t=h(".opalhotel-map-master"),e=!0,i=!1,o=void 0;try{for(var n,a=t[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var p=n.value;0==h(p).parents(".opalhotel-main-map").length&&new s.default(p,h(p).data())}}catch(t){i=!0,o=t}finally{try{!e&&a.return&&a.return()}finally{if(i)throw o}}var u=h(".opalhotel-hotel-available"),c=!0,f=!1,d=void 0;try{for(var g,m=u[Symbol.iterator]();!(c=(g=m.next()).done);c=!0){var _;!function(){var t=g.value,e=h(t).parents(".opalhotel-main-map");if(_=null,1===e.length&&e.find(".opalhotel-map-master")){var i=e.find(".opalhotel-map-master"),o=!0,n=!1,a=void 0;try{for(var p,u=i[Symbol.iterator]();!(o=(p=u.next()).done);o=!0){var c=p.value;_=new s.default(c,h(c).data())}}catch(t){n=!0,a=t}finally{try{!o&&u.return&&u.return()}finally{if(n)throw a}}}var f=new l.default({element:t,map:_});h(".opalhotel_check_hotel_available").on("submit",function(t){var e=h.merge(h(t.target).serializeArray(),h(".opalhotel-ajax-filter-hotel input").serializeArray());return e=h.merge(e,[{name:"paged",value:1}]),r(f,e,_),!1}),h('.opalhotel-ajax-filter-hotel input[type="checkbox"]').on("change",function(t){var e=h.merge(h(".opalhotel-ajax-filter-hotel input").serializeArray(),h(".opalhotel_check_hotel_available:first").serializeArray());return e=h.merge(e,[{name:"paged",value:1}]),r(f,e,_),!1}),h(".opalhotel-slide-ranger").each(function(){var t=this,e=h(this).data("unit"),i=h(this).data("decimals"),o=h(".slide-ranger-bar",this).data("min"),n=h(".slide-ranger-bar",this).data("max"),s=h(".slide-ranger-min-input",this).val(),a=h(".slide-ranger-max-input",this).val();void 0!==h.fn.noUiSlider&&h(".slide-ranger-bar",this).noUiSlider({range:{min:[o],max:[n]},start:[s,a],connect:!0,serialization:{lower:[h.Link({target:function(i){h(".slide-ranger-min-label",t).text(i),i=i.replace(e,""),h(".slide-ranger-min-input",t).val(i)}})],upper:[h.Link({target:function(i){h(".slide-ranger-max-label",t).text(i),i=i.replace(e,""),h(".slide-ranger-max-input",t).val(i)}})],format:{decimals:i,prefix:e,suffix:e}}}).change(function(t){var e=h.merge(h(".opalhotel-ajax-filter-hotel input").serializeArray(),h(".opalhotel_check_hotel_available:first").serializeArray());e=h.merge(e,[{name:"paged",value:1}]),r(f,e,_)})})}()}}catch(t){f=!0,d=t}finally{try{!c&&m.return&&m.return()}finally{if(f)throw d}}var v=h('select[name="sortable"]'),y=!0,w=!1,b=void 0;try{for(var k,C=v[Symbol.iterator]();!(y=(k=C.next()).done);y=!0){var x=k.value;0==h(x).parents(".opalhotel-hotel-available").length&&h(x).on("change",function(t){var e=h(t.target).find("option:selected").data("sortable");return window.location.href=window.location.origin+window.location.pathname+"?sortable="+e,!1})}}catch(t){w=!0,b=t}finally{try{!y&&C.return&&C.return()}finally{if(w)throw b}}})},function(t,e){},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=jQuery,s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{element:null,map:map};o(this,t),this.ele=e.element,this.map=e.map,this.ajaxFired=!1,this._initActions()}return r(t,[{key:"_initActions",value:function(){var e=this;n(this.ele).find("a.page-numbers").on("click",function(i){var o=n.merge(n(".opalhotel-ajax-filter-hotel input").serializeArray(),n(".opalhotel_check_hotel_available:first").serializeArray());return o=n.merge(o,[{name:"paged",value:n(i.target).data("paged")}]),e.load_hotels_available(o).then(function(i){i.places&&new t({element:i.element,map:e.map})}),!1}),n(this.ele).find('select[name="sortable"]').on("change",function(i){var o=(n(i.target).val(),n(i.target).find("option:selected").data("sortable")),r=n.merge([{name:"display",value:n(i.target).find("button:focus").val()}],n(".opalhotel-ajax-filter-hotel input").serializeArray());return r=n.merge(r,n(".opalhotel_check_hotel_available:first").serializeArray()),r=n.merge(r,[{name:"sortable",value:o}]),e.load_hotels_available(r).then(function(i){i.places&&new t({element:i.element,map:e.map})}),!1}),n(this.ele).find(".display-mode").on("submit",function(i){var o=n.merge([{name:"display",value:n(i.target).find("button:focus").val()}],n(".opalhotel-ajax-filter-hotel input").serializeArray());return o=n.merge(o,n(".opalhotel_check_hotel_available:first").serializeArray()),e.load_hotels_available(o).then(function(i){i.places&&new t({element:i.element,map:e.map})}),!1})}},{key:"load_hotels_available",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(function(i,o){t.ajaxFired&&"pending"===t.ajaxFired.state()&&t.ajaxFired.abort();var r=n(".opalhotel-hotel-available");n.each(r.data(),function(t,i){e.push({name:t,value:i})});var s=r.find('select[name="sortable"] option:selected');1==s.length&&e.push({name:"sortable",value:s.val()}),t.ajaxFired=n.ajax({type:"POST",url:OpalHotel.simpleAjaxUrl,data:e,beforeSend:function(){r.addClass("loading"),t.map&&t.map.startLoading()}}).always(function(){for(var i=0;i<e.length;i++){var o=e[i];void 0===o.name||"_wp_http_referer"!==o.name&&"departure"!==o.name&&"arrival"!==o.name||e.splice(i,1)}var r=n.param(e);if(window.history.pushState){var s=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+r;window.history.pushState({path:s},e,s)}opalhotel_jBox_init(),t.map&&t.map.endLoading()}).done(function(e){if(void 0!==e.html){var o=r.parent();r.replaceWith(e.html);var n=o.find(".opalhotel-hotel-available");t.map&&t.map.repaint(e.places),i({places:e.places,element:n})}}).fail(function(){o()})})}}]),t}();e.default=s},function(t,e,i){"use strict";function o(t){this.options=t,this.setValues(t),this.position=new google.maps.LatLng({lat:t.lat,lng:t.lng}),this.div=null}Object.defineProperty(e,"__esModule",{value:!0});var r=jQuery;o.prototype=new google.maps.OverlayView,o.prototype.draw=function(){var t=this,e=this.div;if(!e){var e=document.createElement("div");if(e.style.position="absolute",e.className="opalhotel-marker-icon",this.title){var i="map-marker-"+this.title;i=i.toLowerCase(),i=i.replace(/ /g,"-"),e.setAttribute("id",i)}var o=wp.template("opalhotel-marker-icon");o=o(t.options),r(e).append(o),this.div=e;this.getPanes().overlayImage.appendChild(this.div),google.maps.event.addDomListener(this.div,"click",function(e){google.maps.event.trigger(t,"click",e)})}var n=this.getProjection().fromLatLngToDivPixel(this.position);n&&(this.div.style.left=n.x-r(this.div).find("svg").width()/2+"px",this.div.style.top=n.y-r(this.div).find("svg").height()+"px")},o.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},o.prototype.getPosition=function(){return this.position},o.prototype.getDraggable=function(){return!1},o.prototype.getVisible=function(){return!0},e.default=o},function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),a=i(9),l=o(a),h=i(14),p=o(h),u=i(11),c=o(u),f=i(7),d=o(f),g=jQuery,m=function(){function t(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.ele=e,this.options=this.getOptions(o),this.map=new google.maps.Map(this.ele,this.options),this.bounds=new google.maps.LatLngBounds,this.setMarkers(),this.createControls(),google.maps.event.addListener(this.map,"tilesloaded",function(){i.progressbar&&i.progressbar.stop()},!1)}return s(t,[{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!1,streetViewControl:!1,overviewMapControl:!1,zoomControlOptions:!1,streetViewControlOptions:!1,center:{lat:51.5074,lng:.1278},zoom:12,maxZoom:16,fullscreenControl:!1};return Object.assign(t,e)}},{key:"setMarkers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[].concat(r(this.options.places));this.markers=[];var e=!0,i=!1,o=void 0;try{for(var n,s=t[Symbol.iterator]();!(e=(n=s.next()).done);e=!0){var a=n.value;this._addMarker(a)}}catch(t){i=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw o}}this.map.fitBounds(this.bounds),this.map.panToBounds(this.bounds),this.markerClusterer=new l.default(this.map,this.markers,{ignoreHidden:!0,maxZoom:12,styles:[{textColor:"#000000",url:"",height:70,width:70,gridSize:70}]})}},{key:"_addMarker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:null,title:null,permalink:null,lat:null,lng:null,address:null},e=(new google.maps.Point(12,24),new d.default(t));this.markers.push(e),this.bounds.extend(e.position);var i='<div class="opalhotel-marker">';i+='<img src="'+t.thumbnail+'" />',i+="<h3>"+t.title+"</h3>",i+="<p>"+t.address+"</p>",i+="</div>";var o=!1,r=new p.default({marker:e,wrapperClass:"opalhotel-snazzy-info-window",offset:{top:"-72px"},edgeOffset:{top:50,right:60,bottom:50},border:!1,closeButtonMarkup:'<button type="button" class="close">&#215;</button>',content:wp.template("opalhotel-map-marker-content")(t),callbacks:{open:function(){g(this.getWrapper()).addClass("open")},afterOpen:function(){var t=g(this.getWrapper());t.addClass("active"),t.find(".close").on("click",function(){r.close()})},beforeClose:function(){return!!o||(g(r.getWrapper()).removeClass("active"),setTimeout(function(){o=!0,r.close()},300),!1)},afterClose:function(){var t=g(this.getWrapper());t.find(".close").off(),t.removeClass("open"),o=!1}}});google.maps.event.addListener(e,"click",function(){r.open()},!1)}},{key:"createControls",value:function(){var t=this,e=document.createElement("div");e.className="opalhotel-map-control opalhotel-zoom-control",e.style.marginBottom=e.style.marginTop=e.style.marginLeft="10px",e.innerHTML='<a class="zoom-in" href="javascript:void(0)"><i class="fa fa-plus" aria-hidden="true"></i></a><a class="zoom-out" href="javascript:void(0)"><i class="fa fa-minus" aria-hidden="true"></i></a>',e.index=1,this.map.controls[google.maps.ControlPosition.RIGHT_TOP].push(e);var i=e.getElementsByClassName("zoom-in"),o=!0,r=!1,n=void 0;try{for(var s,a=i[Symbol.iterator]();!(o=(s=a.next()).done);o=!0){var l=s.value;google.maps.event.addDomListener(l,"click",function(){t.map.setZoom(t.map.getZoom()+1)})}}catch(t){r=!0,n=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw n}}var h=e.getElementsByClassName("zoom-out"),p=!0,u=!1,c=void 0;try{for(var f,d=h[Symbol.iterator]();!(p=(f=d.next()).done);p=!0){var m=f.value;google.maps.event.addDomListener(m,"click",function(){var e=t.map.getZoom()-1;e>1&&t.map.setZoom(e)})}}catch(t){u=!0,c=t}finally{try{!p&&d.return&&d.return()}finally{if(u)throw c}}var _=document.createElement("div");_.className="opalhotel-map-control",_.innerHTML='<a class="opalhotel-map-recenter"><i class="fa fa-compress"></i></a>',this.map.controls[google.maps.ControlPosition.LEFT_CENTER].push(_),google.maps.event.addDomListener(_,"click",function(){new google.maps.LatLng(t.options.center.lat,t.options.center.lng);t.map.fitBounds(t.bounds),t.map.panToBounds(t.bounds);var e=t.map.getCenter();t.map.setCenter(new google.maps.LatLng(e.lat()+1e-7,e.lng()))});var v=document.createElement("div");v.className="opalhotel-map-control",v.innerHTML='<a class="opalhotel-map-geolocation"><i class="fa fa-paper-plane-o" aria-hidden="true"></i></a>',this.map.controls[google.maps.ControlPosition.LEFT_CENTER].push(v),google.maps.event.addDomListener(v,"click",function(){t.getLocation().then(function(e){t.map.setCenter(e),g(v).addClass("active")}).catch(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";opalhotel_print_notice(t)})});var y=document.createElement("div");y.className="opalhotel-map-control",y.innerHTML='<a class="opalhotel-map-toggle-lock-map"><i class="fa fa-lock" aria-hidden="true"></i></a>',this.map.controls[google.maps.ControlPosition.LEFT_CENTER].push(y),google.maps.event.addDomListener(y,"click",function(){g(y).toggleClass("active");var e=!1,i=!1;g(y).hasClass("active")?(e=i=!0,g(y).find("i").removeClass("fa-lock").addClass("fa-unlock")):g(y).find("i").addClass("fa-lock").removeClass("fa-unlock"),t.map.set("draggable",e),t.map.set("scrollwheel",i)});var w=document.createElement("div");w.className="opalhotel-map-control",w.innerHTML='<a class="opalhotel-map-countries-button"><i class="fa fa-globe" aria-hidden="true"></i></a>',this.map.controls[google.maps.ControlPosition.LEFT_TOP].push(w);var b=document.createElement("div");b.className="opalhotel-map-countries hide",b.index=1,b.innerHTML=wp.template("opalhotel-map-countries-list")(),b.style.left="50px",this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(b),"function"==typeof g.fn.mCustomScrollbar&&g(b).find("ul").mCustomScrollbar();var k=b.getElementsByTagName("li"),C=!0,x=!1,M=void 0;try{for(var S,O=k[Symbol.iterator]();!(C=(S=O.next()).done);C=!0)!function(){var e=S.value;google.maps.event.addDomListener(e,"click",function(){t.layer&&t.layer.setMap(null);var i=new google.maps.Geocoder,o=g(e).data("country");i.geocode({address:o},function(e,i){if(i==google.maps.GeocoderStatus.OK){t.map.fitBounds(e[0].geometry.bounds);e[0].place_id;t.layer=new google.maps.FusionTablesLayer({query:{select:"kml_4326",from:420419,where:"name_0 = '"+o+"'"},styles:[{polygonOptions:{strokeOpacity:.4,fillOpacity:.7,fillColor:"#FF9800"}}]}),t.layer.setMap(t.map)}else opalhotel_print_notice(OpalHotel.lable.oops)}),g(b).toggleClass("hide fade in")},!1)}()}catch(t){x=!0,M=t}finally{try{!C&&O.return&&O.return()}finally{if(x)throw M}}google.maps.event.addDomListener(w,"click",function(){g(b).toggleClass("hide fade in")})}},{key:"getLocation",value:function(){var t=this;return new Promise(function(e,i){void 0!==t.ajaxGetLocation&&t.ajaxGetLocation.abort(),t.currentPosition&&e(t.currentPosition),navigator.geolocation.getCurrentPosition(function(i,o,r){var n={lat:i.coords.latitude,lng:i.coords.longitude};t.currentPosition||(t.currentPosition=n),e(t.currentPosition)},function(){t.ajaxGetLocation=g.ajax({url:OpalHotel.simpleAjaxUrl,type:"POST",data:{action:"opalhotel_get_position_by_agent_ip",nonce:OpalHotel.nonces.get_location_by_ip},beforeSend:function(){}}).always(function(){}).done(function(o){!0===o.status?(t.currentPosition||(t.currentPosition=o),e(t.currentPosition),void 0!==o.message&&opalhotel_print_notice(o.message,"success")):i(o.message)}).fail(function(){i()})})})}},{key:"repaint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.markers=[],this.markerClusterer.clearMarkers(),this.bounds=new google.maps.LatLngBounds;var e=!0,i=!1,o=void 0;try{for(var r,n=t[Symbol.iterator]();!(e=(r=n.next()).done);e=!0){var s=r.value;this._addMarker(s)}}catch(t){i=!0,o=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw o}}this.map.fitBounds(this.bounds),this.map.panToBounds(this.bounds),this.markerClusterer=new l.default(this.map,this.markers,{ignoreHidden:!0,maxZoom:12,styles:[{textColor:"#000000",url:"",height:70,width:70,gridSize:70}]})}},{key:"startLoading",value:function(){var t=this;this.progressbarDiv=document.createElement("div"),this.progressbarDiv.className="opalhotel-progress-map",this.ele.append(this.progressbarDiv),this.progressbar||(this.progressbar=new c.default.Circle(this.progressbarDiv,{strokeWidth:5,trailWidth:5,easing:"easeInOut",color:"#FCB03C"}));var e=setInterval(function(){t.progressbar.animate(.1,{easing:t.getEffect()}),clearInterval(e)},100)}},{key:"endLoading",value:function(){var t=this;this.progressbar.value()>=.1?(this.progressbar.set(1),this.progressbarDiv&&g(this.progressbarDiv).remove(),this.progressbar&&(this.progressbar.destroy(),this.progressbar=null)):this.progressbar.animate(1,{easing:this.getEffect()},function(){t.progressbarDiv&&g(t.progressbarDiv).remove(),t.progressbar&&(t.progressbar.destroy(),t.progressbar=null)})}},{key:"getEffect",value:function(){return["linear","easeOut","easeIn","easeInOut"][Math.floor(4*Math.random())]}}]),t}();e.default=m},function(t,e,i){"use strict";function o(t,e){t.getMarkerClusterer().extend(o,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new o(this,t.getStyles())}function n(t,e,i){this.extend(n,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.imagePath_=i.imagePath||n.IMAGE_PATH,this.imageExtension_=i.imageExtension||n.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||n.IMAGE_SIZES,this.calculator_=i.calculator||n.CALCULATOR,this.batchSize_=i.batchSize||n.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||n.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.ClusterIcon=o,e.Cluster=r,e.default=n,o.prototype.onAdd=function(){var t,e,i=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(o){if(t=!1,!e){var r,n,s=i.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",i.cluster_),google.maps.event.trigger(s,"clusterclick",i.cluster_),s.getZoomOnClick()&&(n=s.getMaxZoom(),r=i.cluster_.getBounds(),s.getMap().fitBounds(r),setTimeout(function(){s.getMap().fitBounds(r),null!==n&&s.getMap().getZoom()>n&&s.getMap().setZoom(n+1)},100)),o.cancelBubble=!0,o.stopPropagation&&o.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",i.cluster_)})},o.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},o.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},o.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},o.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].replace(/^\s+|\s+$/g,""),10),o=parseInt(e[1].replace(/^\s+|\s+$/g,""),10),r=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(r),t="<img src='"+this.url_+"' style='position: absolute; top: "+o+"px; left: "+i+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*o+"px, "+(-1*i+this.width_)+"px, "+(-1*o+this.height_)+"px, "+-1*i+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},o.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var i=this.styles_[e];this.url_=i.url,this.height_=i.height,this.width_=i.width,this.anchorText_=i.anchorText||[0,0],this.anchorIcon_=i.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=i.textColor||"black",this.textSize_=i.textSize||11,this.textDecoration_=i.textDecoration||"none",this.fontWeight_=i.fontWeight||"bold",this.fontStyle_=i.fontStyle||"normal",this.fontFamily_=i.fontFamily||"Arial,sans-serif",this.backgroundPosition_=i.backgroundPosition||"0 0"},o.prototype.setCenter=function(t){this.center_=t},o.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},o.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.getMap=function(){return this.map_},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},r.prototype.addMarker=function(t){var e,i,o;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,n=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,s=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new google.maps.LatLng(n,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),i=this.markers_.length,null!==(o=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>o)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i===this.minClusterSize_)for(e=0;e<i;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,o=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(o),this.clusterIcon_.show()},r.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},n.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},n.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},n.prototype.draw=function(){},n.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},n.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),i=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)i.extend(e[t].getPosition());this.getMap().fitBounds(i)},n.prototype.getGridSize=function(){return this.gridSize_},n.prototype.setGridSize=function(t){this.gridSize_=t},n.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},n.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},n.prototype.getMaxZoom=function(){return this.maxZoom_},n.prototype.setMaxZoom=function(t){this.maxZoom_=t},n.prototype.getStyles=function(){return this.styles_},n.prototype.setStyles=function(t){this.styles_=t},n.prototype.getTitle=function(){return this.title_},n.prototype.setTitle=function(t){this.title_=t},n.prototype.getZoomOnClick=function(){return this.zoomOnClick_},n.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},n.prototype.getAverageCenter=function(){return this.averageCenter_},n.prototype.setAverageCenter=function(t){this.averageCenter_=t},n.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},n.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},n.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},n.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},n.prototype.getImageExtension=function(){return this.imageExtension_},n.prototype.setImageExtension=function(t){this.imageExtension_=t},n.prototype.getImagePath=function(){return this.imagePath_},n.prototype.setImagePath=function(t){this.imagePath_=t},n.prototype.getImageSizes=function(){return this.imageSizes_},n.prototype.setImageSizes=function(t){this.imageSizes_=t},n.prototype.getCalculator=function(){return this.calculator_},n.prototype.setCalculator=function(t){this.calculator_=t},n.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},n.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},n.prototype.getClusterClass=function(){return this.clusterClass_},n.prototype.setClusterClass=function(t){this.clusterClass_=t},n.prototype.getMarkers=function(){return this.markers_},n.prototype.getTotalMarkers=function(){return this.markers_.length},n.prototype.getClusters=function(){return this.clusters_},n.prototype.getTotalClusters=function(){return this.clusters_.length},n.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},n.prototype.addMarkers=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&this.pushMarkerTo_(t[i]);e||this.redraw_()},n.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},n.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!e&&i&&this.repaint(),i},n.prototype.removeMarkers=function(t,e){var i,o,r=!1;for(i=0;i<t.length;i++)o=this.removeMarker_(t[i]),r=r||o;return!e&&r&&this.repaint(),r},n.prototype.removeMarker_=function(t){var e,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){i=e;break}return-1!==i&&(t.setMap(null),this.markers_.splice(i,1),!0)},n.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},n.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},n.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),o=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),r=e.fromLatLngToDivPixel(i);r.x+=this.gridSize_,r.y-=this.gridSize_;var n=e.fromLatLngToDivPixel(o);n.x-=this.gridSize_,n.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(r),a=e.fromDivPixelToLatLng(n);return t.extend(s),t.extend(a),t},n.prototype.redraw_=function(){this.createClusters_(0)},n.prototype.resetViewport_=function(t){var e,i;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)i=this.markers_[e],i.isAdded=!1,t&&i.setMap(null)},n.prototype.distanceBetweenPoints_=function(t,e){var i=(e.lat()-t.lat())*Math.PI/180,o=(e.lng()-t.lng())*Math.PI/180,r=Math.sin(i/2)*Math.sin(i/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},n.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},n.prototype.addToClosestCluster_=function(t){var e,i,o,n,s=4e4,a=null;for(e=0;e<this.clusters_.length;e++)o=this.clusters_[e],(n=o.getCenter())&&(i=this.distanceBetweenPoints_(n,t.getPosition()))<s&&(s=i,a=o);a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):(o=new r(this),o.addMarker(t),this.clusters_.push(o))},n.prototype.createClusters_=function(t){var e,i,o,r=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),o=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var n=this.getExtendedBounds(o),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;e<s;e++)i=this.markers_[e],!i.isAdded&&this.isMarkerInBounds_(i,n)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){r.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},n.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},n.CALCULATOR=function(t,e){for(var i=0,o=t.length.toString(),r=o;0!==r;)r=parseInt(r/10,10),i++;return i=Math.min(i,e),{text:o,index:i,title:""}},n.BATCH_SIZE=2e3,n.BATCH_SIZE_IE=500,n.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",n.IMAGE_EXTENSION="png",n.IMAGE_SIZES=[53,56,66,78,90]},function(t,e,i){var o=i(1),r=i(0),n=function(t,e){this._pathTemplate="M 0,{center} L 100,{center}",o.apply(this,arguments)};n.prototype=new o,n.prototype.constructor=n,n.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 "+e.strokeWidth),t.setAttribute("preserveAspectRatio","none")},n.prototype._pathString=function(t){return r.render(this._pathTemplate,{center:t.strokeWidth/2})},n.prototype._trailString=function(t){return this._pathString(t)},t.exports=n},function(t,e,i){t.exports={Line:i(10),Circle:i(2),SemiCircle:i(12),Path:i(3),Shape:i(1),utils:i(0)}},function(t,e,i){var o=i(1),r=i(2),n=i(0),s=function(t,e){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,o.apply(this,arguments)};s.prototype=new o,s.prototype.constructor=s,s.prototype._initializeSvg=function(t,e){t.setAttribute("viewBox","0 0 100 50")},s.prototype._initializeTextContainer=function(t,e,i){t.text.style&&(i.style.top="auto",i.style.bottom="0",t.text.alignToBottom?n.setStyle(i,"transform","translate(-50%, 0)"):n.setStyle(i,"transform","translate(-50%, 50%)"))},s.prototype._pathString=r.prototype._pathString,s.prototype._trailString=r.prototype._trailString,t.exports=s},function(t,e,i){(function(){var e=this||Function("return this")(),i=function(){"use strict";function i(){}function o(t,e){var i;for(i in t)Object.hasOwnProperty.call(t,i)&&e(i)}function r(t,e){return o(e,function(i){t[i]=e[i]}),t}function n(t,e){o(e,function(i){void 0===t[i]&&(t[i]=e[i])})}function s(t,e,i,o,r,n,s){var l,h,p,u=t<n?0:(t-n)/r;for(l in e)e.hasOwnProperty(l)&&(h=s[l],p="function"==typeof h?h:c[h],e[l]=a(i[l],o[l],p,u));return e}function a(t,e,i,o){return t+(e-t)*i(o)}function l(t,e){var i=u.prototype.filter,r=t._filterArgs;o(i,function(o){void 0!==i[o][e]&&i[o][e].apply(t,r)})}function h(t,e,i,o,r,n,a,h,p,u,c){v=e+i+o,y=Math.min(c||_(),v),w=y>=v,b=o-(v-y),t.isPlaying()&&(w?(p(a,t._attachment,b),t.stop(!0)):(t._scheduleId=u(t._timeoutHandler,g),l(t,"beforeTween"),y<e+i?s(1,r,n,a,1,1,h):s(y,r,n,a,o,e+i,h),l(t,"afterTween"),p(r,t._attachment,b)))}function p(t,e){var i={},r=typeof e;return"string"===r||"function"===r?o(t,function(t){i[t]=e}):o(t,function(t){i[t]||(i[t]=e[t]||d)}),i}function u(t,e){this._currentState=t||{},this._configured=!1,this._scheduleFunction=f,void 0!==e&&this.setConfig(e)}var c,f,d="linear",g=1e3/60,m=Date.now?Date.now:function(){return+new Date},_="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:m;f="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var v,y,w,b;return u.prototype.tween=function(t){return this._isTweening?this:(void 0===t&&this._configured||this.setConfig(t),this._timestamp=_(),this._start(this.get(),this._attachment),this.resume())},u.prototype.setConfig=function(t){t=t||{},this._configured=!0,this._attachment=t.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=t.delay||0,this._start=t.start||i,this._step=t.step||i,this._finish=t.finish||i,this._duration=t.duration||500,this._currentState=r({},t.from||this.get()),this._originalState=this.get(),this._targetState=r({},t.to||this.get());var e=this;this._timeoutHandler=function(){h(e,e._timestamp,e._delay,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)};var o=this._currentState,s=this._targetState;return n(s,o),this._easing=p(o,t.easing||d),this._filterArgs=[o,this._originalState,s,this._easing],l(this,"tweenCreated"),this},u.prototype.get=function(){return r({},this._currentState)},u.prototype.set=function(t){this._currentState=t},u.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},u.prototype.resume=function(){return this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},u.prototype.seek=function(t){t=Math.max(t,0);var e=_();return this._timestamp+t===0?this:(this._timestamp=e-t,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,h(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,e),this.pause()),this)},u.prototype.stop=function(t){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=i,(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId),t&&(l(this,"beforeTween"),s(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),l(this,"afterTween"),l(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},u.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},u.prototype.setScheduleFunction=function(t){this._scheduleFunction=t},u.prototype.dispose=function(){var t;for(t in this)this.hasOwnProperty(t)&&delete this[t]},u.prototype.filter={},u.prototype.formula={linear:function(t){return t}},c=u.prototype.formula,r(u,{now:_,each:o,tweenProps:s,tweenProp:a,applyFilter:l,shallowCopy:r,defaults:n,composeEasingObject:p}),"function"==typeof SHIFTY_DEBUG_NOW&&(e.timeoutHandler=h),t.exports=u,u}();!function(){i.shallowCopy(i.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return 1-Math.cos(t*(Math.PI/2))},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1},swingFromTo:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})}(),function(){function t(t,e,i,o,r,n){function s(t){return((u*t+c)*t+f)*t}function a(t){return((d*t+g)*t+m)*t}function l(t){return(3*u*t+2*c)*t+f}function h(t){return t>=0?t:0-t}function p(t,e){var i,o,r,n,a,p;for(r=t,p=0;p<8;p++){if(n=s(r)-t,h(n)<e)return r;if(a=l(r),h(a)<1e-6)break;r-=n/a}if(i=0,o=1,(r=t)<i)return i;if(r>o)return o;for(;i<o;){if(n=s(r),h(n-t)<e)return r;t>n?i=r:o=r,r=.5*(o-i)+i}return r}var u=0,c=0,f=0,d=0,g=0,m=0;return f=3*e,c=3*(o-e)-f,u=1-f-c,m=3*i,g=3*(r-i)-m,d=1-m-g,function(t,e){return a(p(t,e))}(t,function(t){return 1/(200*t)}(n))}function e(e,i,o,r){return function(n){return t(n,e,i,o,r,1)}}i.setBezierFunction=function(t,o,r,n,s){var a=e(o,r,n,s);return a.displayName=t,a.x1=o,a.y1=r,a.x2=n,a.y2=s,i.prototype.formula[t]=a},i.unsetBezierFunction=function(t){delete i.prototype.formula[t]}}(),function(){function t(t,e,o,r,n,s){return i.tweenProps(r,e,t,o,1,s,n)}var e=new i;e._filterArgs=[],i.interpolate=function(o,r,n,s,a){var l=i.shallowCopy({},o),h=a||0,p=i.composeEasingObject(o,s||"linear");e.set({});var u=e._filterArgs;u.length=0,u[0]=l,u[1]=o,u[2]=r,u[3]=p,i.applyFilter(e,"tweenCreated"),i.applyFilter(e,"beforeTween");var c=t(o,l,r,n,p,h);return i.applyFilter(e,"afterTween"),c}}(),function(t){function e(t,e){var i,o=[],r=t.length;for(i=0;i<r;i++)o.push("_"+e+"_"+i);return o}function i(t){var e=t.match(b);return e?(1===e.length||t.charAt(0).match(w))&&e.unshift(""):e=["",""],e.join(S)}function o(e){t.each(e,function(t){var i=e[t];"string"==typeof i&&i.match(M)&&(e[t]=r(i))})}function r(t){return l(M,t,n)}function n(t){var e=s(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function s(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),O[0]=a(t.substr(0,2)),O[1]=a(t.substr(2,2)),O[2]=a(t.substr(4,2)),O}function a(t){return parseInt(t,16)}function l(t,e,i){var o=e.match(t),r=e.replace(t,S);if(o)for(var n,s=o.length,a=0;a<s;a++)n=o.shift(),r=r.replace(S,i(n));return r}function h(t){return l(C,t,p)}function p(t){for(var e=t.match(k),i=e.length,o=t.match(x)[0],r=0;r<i;r++)o+=parseInt(e[r],10)+",";return o=o.slice(0,-1)+")"}function u(o){var r={};return t.each(o,function(t){var n=o[t];if("string"==typeof n){var s=_(n);r[t]={formatString:i(n),chunkNames:e(s,t)}}}),r}function c(e,i){t.each(i,function(t){for(var o=e[t],r=_(o),n=r.length,s=0;s<n;s++)e[i[t].chunkNames[s]]=+r[s];delete e[t]})}function f(e,i){t.each(i,function(t){var o=e[t],r=d(e,i[t].chunkNames),n=g(r,i[t].chunkNames);o=m(i[t].formatString,n),e[t]=h(o)})}function d(t,e){for(var i,o={},r=e.length,n=0;n<r;n++)i=e[n],o[i]=t[i],delete t[i];return o}function g(t,e){P.length=0;for(var i=e.length,o=0;o<i;o++)P.push(t[e[o]]);return P}function m(t,e){for(var i=t,o=e.length,r=0;r<o;r++)i=i.replace(S,+e[r].toFixed(4));return i}function _(t){return t.match(k)}function v(e,i){t.each(i,function(t){var o,r=i[t],n=r.chunkNames,s=n.length,a=e[t];if("string"==typeof a){var l=a.split(" "),h=l[l.length-1];for(o=0;o<s;o++)e[n[o]]=l[o]||h}else for(o=0;o<s;o++)e[n[o]]=a;delete e[t]})}function y(e,i){t.each(i,function(t){var o=i[t],r=o.chunkNames,n=r.length,s=e[r[0]];if("string"==typeof s){for(var a="",l=0;l<n;l++)a+=" "+e[r[l]],delete e[r[l]];e[t]=a.substr(1)}else e[t]=s})}var w=/(\d|\-|\.)/,b=/([^\-0-9\.]+)/g,k=/[0-9.\-]+/g,C=new RegExp("rgb\\("+k.source+/,\s*/.source+k.source+/,\s*/.source+k.source+"\\)","g"),x=/^.*\(/,M=/#([0-9]|[a-f]){3,6}/gi,S="VAL",O=[],P=[];t.prototype.filter.token={tweenCreated:function(t,e,i,r){o(t),o(e),o(i),this._tokenData=u(t)},beforeTween:function(t,e,i,o){v(o,this._tokenData),c(t,this._tokenData),c(e,this._tokenData),c(i,this._tokenData)},afterTween:function(t,e,i,o){f(t,this._tokenData),f(e,this._tokenData),f(i,this._tokenData),y(o,this._tokenData)}}}(i)}).call(null)},function(t,e,i){var o,r,n;!function(i,s){r=[t,e],o=s,void 0!==(n="function"==typeof o?o.apply(e,r):o)&&(t.exports=n)}(0,function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){t&&e&&Object.keys(e).forEach(function(i){t[i]=e[i]})}function s(t){var e={};return n(e,g),n(e,t),Object.keys(g).forEach(function(t){var i=g[t];if("object"===(void 0===i?"undefined":f(i))){var o={};n(o,i),n(o,e[t]),e[t]=o}}),e}function a(t,e){var i=/^(-{0,1}\.{0,1}\d+(\.\d+)?)[\s|\.]*(\w*)$/;if(t&&i.test(t)){var o=i.exec(t);return{value:1*o[1],units:o[3]||"px",original:t}}return e?a(e):{original:e}}function l(t,e){if(t){for(;t.firstChild;)t.removeChild(t.firstChild);e&&("string"==typeof e?t.innerHTML=e:t.appendChild(e))}}function h(t){return"top"===t?"bottom":"bottom"===t?"top":"left"===t?"right":"right"===t?"left":t}function p(t){return t.charAt(0).toUpperCase()+t.slice(1)}function u(t){if(void 0!==t&&null!==t&&google){if(t instanceof google.maps.LatLng)return t;if(void 0!==t.lat&&void 0!==t.lng)return new google.maps.LatLng(t)}return null}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d={h:"0px",v:"3px",blur:"6px",spread:"0px",color:"#000"},g={placement:"top",pointer:!0,openOnMarkerClick:!0,closeOnMapClick:!0,closeWhenOthersOpen:!1,showCloseButton:!0,panOnOpen:!0,edgeOffset:{top:20,right:20,bottom:20,left:20}},m=function(t){function e(t){i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));r._html=null,r._opts=s(t),r._callbacks=r._opts.callbacks||{},r._marker=r._opts.marker,r._map=r._opts.map,r._position=u(r._opts.position),r._isOpen=!1,r._listeners=[],google&&r._marker&&r._opts.openOnMarkerClick&&r.trackListener(google.maps.event.addListener(r._marker,"click",function(){r.getMap()||r.open()}),!0),r._position&&!r._opts.offset&&(r._opts.offset={top:"0px",left:"0px"});var n=t.placement||r._opts.position;return("string"==typeof n||n instanceof String)&&(n=n.toLowerCase()),r._opts.placement="top"!==n&&"bottom"!==n&&"left"!==n&&"right"!==n?g.placement:n,n=r._opts.position,void 0===n||null===n||"string"==typeof n||n instanceof String||(r._opts.position=n),void 0!==r._opts.border&&!0!==r._opts.border||(r._opts.border={}),void 0===r._opts.pointer&&(r._opts.pointer=g.pointer),void 0!==r._opts.shadow&&!0!==r._opts.shadow||(r._opts.shadow={}),r}return r(e,t),c(e,[{key:"activateCallback",value:function(t){var e=this._callbacks[t];return e?e.apply(this):void 0}},{key:"trackListener",value:function(t,e){this._listeners.push({listener:t,persistent:e})}},{key:"clearListeners",value:function(t){google&&this._listeners&&(this._listeners.forEach(function(e){!t&&e.persistent||(google.maps.event.removeListener(e.listener),e.listener=null)}),this._listeners=this._listeners.filter(function(t){return null!=t.listener}))}},{key:"isOpen",value:function(){return this._isOpen}},{key:"open",value:function(){var t=this.activateCallback("beforeOpen");(void 0===t||t)&&(this._marker?this.setMap(this._marker.getMap()):this._map&&this._position&&this.setMap(this._map))}},{key:"close",value:function(){var t=this.activateCallback("beforeClose");(void 0===t||t)&&(this.clearListeners(),this.setMap(null))}},{key:"destroy",value:function(){this.getMap()&&this.setMap(null),this.clearListeners(!0)}},{key:"setContent",value:function(t){this._opts.content=t,this._html&&this._html.content&&l(this._html.content,t)}},{key:"setPosition",value:function(t){this._position=u(t),this._isOpen&&this._position&&(this.draw(),this.resize(),this.reposition())}},{key:"getWrapper",value:function(){return this._html?this._html.wrapper:null}},{key:"draw",value:function(){if(this.getMap()&&this._html&&(this._marker||this._position)){var t=this._opts.offset;t&&(t.left&&(this._html.wrapper.style.marginLeft=t.left),t.top&&(this._html.wrapper.style.marginTop=t.top));var e=this._opts.backgroundColor;if(e&&(this._html.contentWrapper.style.backgroundColor=e,this._opts.pointer&&(this._html.pointerBg.style["border"+p(this._opts.placement)+"Color"]=e)),this._opts.padding&&(this._html.contentWrapper.style.padding=this._opts.padding,this._opts.shadow&&(this._html.shadowFrame.style.padding=this._opts.padding)),this._opts.borderRadius&&(this._html.contentWrapper.style.borderRadius=this._opts.borderRadius,this._opts.shadow&&(this._html.shadowFrame.style.borderRadius=this._opts.borderRadius)),this._opts.fontSize&&(this._html.wrapper.style.fontSize=this._opts.fontSize),this._opts.fontColor&&(this._html.contentWrapper.style.color=this._opts.fontColor),this._opts.pointer&&!0!==this._opts.pointer&&(this._opts.shadow&&(this._html.shadowPointer.style.width=this._opts.pointer,this._html.shadowPointer.style.height=this._opts.pointer),this._html.pointerBorder&&(this._html.pointerBorder.style.borderWidth=this._opts.pointer),this._html.pointerBg.style.borderWidth=this._opts.pointer),this._opts.border){var i=0;if(void 0!==this._opts.border.width&&(i=a(this._opts.border.width,"0px"),this._html.contentWrapper.style.borderWidth=i.value+i.units),i=Math.round((this._html.contentWrapper.offsetWidth-this._html.contentWrapper.clientWidth)/2),i=a(i+"px","0px"),this._opts.pointer){var o=Math.min(this._html.pointerBorder.offsetHeight,this._html.pointerBorder.offsetWidth);o=a(o+"px","0px");var r=Math.round(i.value*(1.41421356237-1));r=Math.min(r,o.value),this._html.pointerBg.style.borderWidth=o.value-r+o.units;var n=p(h(this._opts.placement));this._html.pointerBg.style["margin"+n]=r+i.units,this._html.pointerBg.style[this._opts.placement]=-i.value+i.units}var s=this._opts.border.color;s&&(this._html.contentWrapper.style.borderColor=s,this._html.pointerBorder&&(this._html.pointerBorder.style["border"+p(this._opts.placement)+"Color"]=s))}if(this._opts.shadow){var l=this._opts.shadow,u=function(t){var e=l[t];return void 0!==e&&null!=e};if(u("h")||u("v")||u("blur")||u("spread")||u("color")){var c=a(l.h,d.h),f=a(l.v,d.v),g=a(l.blur,d.blur),m=a(l.spread,d.spread),_=l.color||d.color,v=function(t,e){return t+" "+e+" "+g.original+" "+m.original+" "+_};this._html.shadowFrame.style.boxShadow=v(c.original,f.original);var y=.7071067811865474*(c.value-f.value)+c.units,w=.7071067811865474*(c.value+f.value)+f.units;this._html.shadowPointerInner.style.boxShadow=v(y,w)}this._opts.shadow.opacity&&(this._html.shadowWrapper.style.opacity=this._opts.shadow.opacity)}var b=this.getProjection().fromLatLngToDivPixel(this._position||this._marker.position);b&&(this._html.floatWrapper.style.top=Math.floor(b.y)+"px",this._html.floatWrapper.style.left=Math.floor(b.x)+"px"),this._isOpen||(this._isOpen=!0,this.resize(),this.reposition(),this.activateCallback("afterOpen"),google&&google.maps.event.trigger(this.getMap(),"snazzy-info-window-opened",this))}}},{key:"onAdd",value:function(){var t=this;if(!this._html){var e=function(t,e){if(t&&e)for(var i=0;i<e.length;i++){var o=e[i];o&&(t.className&&(t.className+=" "),t.className+="si-"+o)}},i=function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];var r=document.createElement("div");return e(r,i),r};if(this._html={},this._html.wrapper=i("wrapper-"+this._opts.placement),this._opts.wrapperClass&&(this._html.wrapper.className+=" "+this._opts.wrapperClass),this._opts.border&&e(this._html.wrapper,["has-border"]),this._opts.shadow&&(this._html.shadowWrapper=i("shadow-wrapper-"+this._opts.placement),this._html.shadowFrame=i("frame","shadow-frame"),this._html.shadowWrapper.appendChild(this._html.shadowFrame),this._opts.pointer&&(this._html.shadowPointer=i("shadow-pointer-"+this._opts.placement),this._html.shadowPointerInner=i("shadow-inner-pointer-"+this._opts.placement),this._html.shadowPointer.appendChild(this._html.shadowPointerInner),this._html.shadowWrapper.appendChild(this._html.shadowPointer)),this._html.wrapper.appendChild(this._html.shadowWrapper)),this._html.contentWrapper=i("frame","content-wrapper"),this._html.content=i("content"),this._opts.content&&l(this._html.content,this._opts.content),this._opts.showCloseButton){if(this._opts.closeButtonMarkup){var o=document.createElement("div");l(o,this._opts.closeButtonMarkup),this._html.closeButton=o.firstChild}else this._html.closeButton=document.createElement("button"),this._html.closeButton.setAttribute("type","button"),this._html.closeButton.innerHTML="&#215;",e(this._html.closeButton,["close-button"]);this._html.contentWrapper.appendChild(this._html.closeButton)}this._html.contentWrapper.appendChild(this._html.content),this._html.wrapper.appendChild(this._html.contentWrapper),this._opts.pointer&&(this._opts.border&&(this._html.pointerBorder=i("pointer-"+this._opts.placement,"pointer-border-"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBorder)),this._html.pointerBg=i("pointer-"+this._opts.placement,"pointer-bg-"+this._opts.placement),this._html.wrapper.appendChild(this._html.pointerBg)),this._html.floatWrapper=i("float-wrapper"),this._html.floatWrapper.appendChild(this._html.wrapper),this.getPanes().floatPane.appendChild(this._html.floatWrapper);var r=this.getMap();this.clearListeners(),this._opts.closeOnMapClick&&this.trackListener(google.maps.event.addListener(r,"click",function(){t.close()})),this._opts.closeWhenOthersOpen&&this.trackListener(google.maps.event.addListener(r,"snazzy-info-window-opened",function(e){t!==e&&t.close()})),google&&(this._previousWidth=null,this._previousHeight=null,this.trackListener(google.maps.event.addListener(r,"bounds_changed",function(){var e=r.getDiv(),i=e.offsetWidth,o=e.offsetHeight,n=t._previousWidth,s=t._previousHeight;null!==n&&null!==s&&n===i&&s===o||(t._previousWidth=i,t._previousHeight=o,t.resize())})),this._marker&&this.trackListener(google.maps.event.addListener(this._marker,"position_changed",function(){t.draw()})),this._opts.showCloseButton&&!this._opts.closeButtonMarkup&&this.trackListener(google.maps.event.addDomListener(this._html.closeButton,"click",function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),t.close()})),["click","dblclick","rightclick","contextmenu","drag","dragend","dragstart","mousedown","mouseout","mouseover","mouseup","touchstart","touchend","touchmove","wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"].forEach(function(e){t.trackListener(google.maps.event.addDomListener(t._html.wrapper,e,function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}))})),this.activateCallback("open")}}},{key:"onRemove",value:function(){if(this.activateCallback("close"),this._html){var t=this._html.floatWrapper.parentElement;t&&t.removeChild(this._html.floatWrapper),this._html=null}this._isOpen=!1,this.activateCallback("afterClose")}},{key:"getMapInnerBounds",value:function(){var t=this.getMap().getDiv().getBoundingClientRect(),e={top:t.top+this._opts.edgeOffset.top,right:t.right-this._opts.edgeOffset.right,bottom:t.bottom-this._opts.edgeOffset.bottom,left:t.left+this._opts.edgeOffset.left};return e.width=e.right-e.left,e.height=e.bottom-e.top,e}},{key:"reposition",value:function(){if(this._opts.panOnOpen&&this._html){var t=this.getMapInnerBounds(),e=this._html.wrapper.getBoundingClientRect(),i=0,o=0;t.left>=e.left?i=e.left-t.left:t.right<=e.right&&(i=e.left-(t.right-e.width)),t.top>=e.top?o=e.top-t.top:t.bottom<=e.bottom&&(o=e.top-(t.bottom-e.height)),0===i&&0===o||this.getMap().panBy(i,o)}}},{key:"resize",value:function(){if(this._html){var t=this.getMapInnerBounds(),e=t.width;void 0!==this._opts.maxWidth&&(e=Math.min(e,this._opts.maxWidth)),e-=this._html.wrapper.offsetWidth-this._html.content.offsetWidth,this._html.content.style.maxWidth=e+"px";var i=t.height;void 0!==this._opts.maxHeight&&(i=Math.min(i,this._opts.maxHeight)),i-=this._html.wrapper.offsetHeight-this._html.content.offsetHeight,this._html.content.style.maxHeight=i+"px"}}}]),e}(google.maps.OverlayView);e.default=m,t.exports=e.default})},function(t,e,i){i(4),t.exports=i(5)}]);